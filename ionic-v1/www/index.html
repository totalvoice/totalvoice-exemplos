<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link rel="manifest" href="manifest.json">

    <!-- un-comment this code to enable service worker
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('service worker installed'))
          .catch(err => console.log('Error', err));
      }
    </script>-->


    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- RTC Connection -->
    <script src="js/RTCMultiConnection.min.js"></script>

    <!-- Socket-io -->
    <script src="js/socket.io.js"></script>

    <!-- jquery -->
    <script src="js/jquery.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>

    <!-- Controllers -->
    <script src="js/controllers.js"></script>

    <!-- Server socket-io -->
    <!-- <script src="js/server.js"></script> -->

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.6.6/firebase.js"></script>

    <!-- AngularFire -->
    <script src="https://cdn.firebase.com/libs/angularfire/2.3.0/angularfire.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/ionicons@4.2.2/dist/ionicons.js"></script>


    <script>

      // Configurações do Firebase - Gerar config no site do Firebase

      let config = {
        apiKey: "",
        authDomain: "",
        databaseURL: "",
        projectId: "",
        storageBucket: "",
        messagingSenderId: ""
      }

      firebase.initializeApp(config);

      ///////////////////////////////////////

  </script>

  </head>
  <body ng-app="starter" ng-controller="ChatCtrl">
    
    <!-- Hack api ligação não remover -->
    <span id="widget-evoline-api-container"></span>
    <!-- //////////////////////////////// -->
    <ion-pane >
      <ion-header-bar class="topbar">
        <ion-navbar color="dark" class="navbar">
          <b class="nameTop">{{anotherName}}</b>

          <ion-buttons ng-if="onCall" end>
            <button ion-button icon-only class="btnCall" ng-click="callTocall()">
              <ion-icon name="call" class="iconCall"></ion-icon>
            </button>
          </ion-buttons>

          <ion-buttons ng-if="!onCall" end>
            <button ion-button icon-only class="btnCallOff">
              <ion-icon name="call" class="iconCall"></ion-icon>
            </button>
          </ion-buttons>

        </ion-navbar>
      </ion-header-bar>

      <ion-content delegate-handle="chatScroll">
        <ion-list>
            <ion-item class="item-divider" ng-repeat="msg in mensagens" no-lines>

              <span ng-if="msg.id==msgIN()">
                  <img class="user-image pseudoRight" src="../img/pseudoRight.png" />                
                <p class="presetChat">{{msg.messages}}</p>
              </span>

              <span ng-if="msg.id==msgAT()">
                <ion-avatar>
                  <img class="user-image regule" src="{{anotherAvatar}}" />
                </ion-avatar>
                  <img class="user-image pseudoLeft" src="../img/pseudoLeft.png" />
                <p class="anotherChat">{{msg.messages}}</p>
              </span>

            </ion-item>
        </ion-list>
      </ion-content>

      <ion-footer-bar align-title="left" class="footer">

        <ion-input class="item item-input inputStyle">
          <input type="text" placeholder="Envie sua mensagem" ng-model="msg">
        </ion-input>


        <ion-col col-2="" ng-click="sendMessenger()">
          <ion-icon class="sendIcon" name="paper-plane"></ion-icon>
        </ion-col>

      </ion-footer-bar>
    </ion-pane>
  </body>
</html>
